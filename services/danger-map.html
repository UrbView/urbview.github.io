<style>
.header {
  background-color: whitesmoke;
  display: flex;
  justify-content: space-between;
  align-items: center;
  height: 15%;
}

.header img:first-child {
  margin-left: 10;
}

.header img:last-child {
  margin-right: 0;
  width: 3%;
  margin-right: 10;
}
</style>


<html>

    <head>

        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css"
        integrity="sha256-kLaT2GOSpHechhsozzB+flnD+zUyjE2LlfWPgU04xyI=" crossorigin=""/>

         <!-- Make sure you put this AFTER Leaflet's CSS -->
        <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"
        integrity="sha256-WBkoXOwTeyKclOHuWtc+i2uENFpDZ9YPdf5Hf+D7ewM="
        crossorigin=""></script>
        <link rel="stylesheet" href="/css/urbstyle.css"/>

        <style>

            .row {
            display: flex;
            }

            .column {
            flex: 25%;
            }

            @font-face {
                font-family: urbfont;
                src: url('../style/barlow/barlow/Barlow-Bold.ttf');
                }

                .h2{
                font-family: urbfont;
                }

                @font-face {
                font-family: urbfontlight;
                src: url('../style/barlow/barlow/Barlow-Light.ttf');
                }
                .p{
                    font-family: urbfontlight;
                }

        </style>

    </head>

    

    <body style="background-color: aquamarine; font-family: urbfont;">
    <a id = 'last-clicked-coord' style="display: none;"></a>

        <div class="header">

        <img src="../style/png/global/UI_Assets-12.png">
        <img src="../style/png/global/UI_Assets-10.png">

        </div>

        <div class="row">
            <div class="column" style="background-color: rgb(164, 36, 36);">


                <div style = "margin-left: 10%;">

                    <br>
                    <h2 style="font-size: 50;">

                        Danger Map
    
                    </h2>
                    <p style="font-family: urbfontlight;">
                        Sit amet, consetetur sadipscing elitr,
                        sed diam nonumy eirmod tempor invidunt ut labore et
                        <br>
                        dolore magna aliquyam erat. we need looooads of text here to 
                        <br>accomplish a nice box lot of text is good but wtf do we write here.
                        This explanation could take a while idk.
    
                    </p>


                </div>
                <button onclick="ask_urbview()" style=" margin-left: 50%;">Ask UrbView!</button>


            </div>
            <div class="column">



                <div id="map" style="height: 420px; width: 1024px;"></div>


            </div>


        </div>


        <script>


            var base_icon = L.icon({
                iconUrl: '../style/png/v1/UI_Assets-03.png',
                iconSize: [40, 50],
                iconAnchor: [20, 50]
            })

            var green_icon =  L.icon({
                iconUrl: '../style/png/v1/UI_Assets-04.png',
                iconSize: [40, 50],
                iconAnchor: [20, 50]
            })

            var red_icon =  L.icon({
                iconUrl: '../style/png/v1/UI_Assets-05.png',
                iconSize: [40, 50],
                iconAnchor: [20, 50]
            })

            var map = L.map('map').setView([53.657439968356414, 10.175339080682194], 16);
            L.tileLayer('https://{s}.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}.png', {
            maxZoom: 25,
            attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
        }).addTo(map);
    
        let markers = []
        function onMapClick(e) {
            document.getElementById('last-clicked-coord').innerHTML = e.latlng
            var marker = L.marker(e.latlng, {icon: base_icon}).addTo(map);
            marker.bindPopup("Coordinates: " + e.latlng.lat + ", " + e.latlng.lng);
            markers.push(marker)
            console.log(markers)
        }
            
    
        map.on('click', onMapClick);

        function ask_urbview(){

            // Just for recording the demo and exemplify what we intend
            // Replace for the API endpoint and receive the text on production

            var rangeArray = Array.from({length: markers.length}, (v, i) => i);

            for (var i = 0; i < rangeArray.length; i++) {
                x = (Math.floor(Math.random() * 2) == 0);
                    if(x){
                        icon = red_icon
                    }else{
                        icon = green_icon
                    }

                console.log(markers)

                m = markers.pop(0)
                console.log(markers)
                m.setIcon(icon)
                }   
            

            
            



        }
    
    
        </script>


    

    </body>



</html>
